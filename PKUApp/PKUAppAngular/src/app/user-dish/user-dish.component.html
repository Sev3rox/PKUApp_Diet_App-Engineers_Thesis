<div style="display: flex; justify-content: center;">
    <div style="width: 40%;" >
    
      <div style="text-align: center; background-color: #212529; color: #38b0ff;" >
        <h1> Products List</h1>
       </div>
    
    <div class="panel panel-primary">
        <div class="panel-body">
    
    <div class="modal fade bg-dark" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">{{ModalTitle}}</h5>
            <button #mybutton type="button" class="close" 
            data-dismiss="modal" aria-label="Close"
            (click)="closeClick()" >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <app-user-dish-details-product [product]="product" *ngIf="ActivateDetailsProductComp">
            </app-user-dish-details-product>
            <app-user-add-edit-product-dish [product]="product" [weight]="weight" *ngIf="ActivateAddEditProductDishComp">
            </app-user-add-edit-product-dish>
            <app-user-product-in-dish-details [product]="product" *ngIf="ActivateProductInDishDetailsComp">
            </app-user-product-in-dish-details>
            <app-user-delete-product-dish [product]="product" *ngIf="ActivateDeleteProductDishComp">
            </app-user-delete-product-dish>
            <app-user-dish-summary-details [summary]="DishProductsSummary"  *ngIf="ActivateDishSummaryDetailsComp">
            </app-user-dish-summary-details>
            <app-user-delete-all-products-dish *ngIf="ActivateDeleteAllProductsDishComp">
            </app-user-delete-all-products-dish>
            <app-user-create-dish *ngIf="ActivateAddDishComp">
            </app-user-create-dish>
          </div>
        </div>
      </div>
    </div>
          <div style="align-content: center;">
            <button *ngIf="categoryFruits" (click)="categoryResult('Fruits')" style="width:15%; margin-left: 1%;" type="button" class="btn btn-primary">Fruits</button>
            <button *ngIf="!categoryFruits" (click)="categoryResult('Fruits')" style="width:15%; margin-left: 1%;" type="button" class="btn btn-light">Fruits</button>
            <button *ngIf="categoryVegetables" (click)="categoryResult('Vegetables')" style="width:20%;" type="button" class="btn btn-primary">Vegetables</button>
            <button *ngIf="!categoryVegetables" (click)="categoryResult('Vegetables')" style="width:20%;" type="button" class="btn btn-light">Vegetables</button>
            <button *ngIf="categoryDairy" (click)="categoryResult('Dairy')" style="width:15%;" type="button" class="btn btn-primary">Dairy</button>
            <button *ngIf="!categoryDairy" (click)="categoryResult('Dairy')" style="width:15%;" type="button" class="btn btn-light">Dairy</button>
            <button *ngIf="categoryGrains" (click)="categoryResult('Grains')" style="width:15%;" type="button" class="btn btn-primary">Grains</button>
            <button *ngIf="!categoryGrains" (click)="categoryResult('Grains')" style="width:15%;" type="button" class="btn btn-light">Grains</button>
            <button *ngIf="categoryProteinFoods" (click)="categoryResult('ProteinFoods')" style="width:20%;" type="button" class="btn btn-primary">Protein Foods</button>
            <button *ngIf="!categoryProteinFoods" (click)="categoryResult('ProteinFoods')" style="width:20%;" type="button" class="btn btn-light">Protein Foods</button>
            </div>
            <br>
           <div style="align-content: center;">
            <button *ngIf="categoryDrinks" (click)="categoryResult('Drinks')" style="width:17%;" type="button" class="btn btn-primary">Drinks</button>
            <button *ngIf="!categoryDrinks" (click)="categoryResult('Drinks')" style="width:17%;" type="button" class="btn btn-light">Drinks</button>
            <button *ngIf="categorySnacks" (click)="categoryResult('Snacks')" style="width:17%;" type="button" class="btn btn-primary">Snacks</button>
            <button *ngIf="!categorySnacks" (click)="categoryResult('Snacks')" style="width:17%;" type="button" class="btn btn-light">Snacks</button>
            <button *ngIf="categoryDishes" (click)="categoryResult('Dishes')" style="width:17%;" type="button" class="btn btn-primary">Dishes</button>
            <button *ngIf="!categoryDishes" (click)="categoryResult('Dishes')" style="width:17%;" type="button" class="btn btn-light">Dishes</button>
            <button *ngIf="categoryOther" (click)="categoryResult('Other')" style="width:15%;" type="button" class="btn btn-primary">Other</button>
            <button *ngIf="!categoryOther" (click)="categoryResult('Other')" style="width:15%;" type="button" class="btn btn-light">Other</button>
    
            <button *ngIf="categoryFav" (click)="categoryResult('Fav')" style="width:20%; background-color: orange;" type="button" class="btn btn-warning">Favourites
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                  </svg>
            </button>
            <button *ngIf="!categoryFav" (click)="categoryResult('Fav')" style="width:20%;" type="button" class="btn btn-warning">Favourites
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                  </svg>
            </button>
          </div>
          <div style="margin-top:10px; margin-left: 1%; align-content: center;" class="d-flex flex-row" >
            <div style="width: 70%; margin: 0 auto;" class="d-flex flex-row" >
              <input [(ngModel)]="productSearch" class="form-control" placeholder="Search" (keyup.enter)="searchProduct()">
              <button (click)="searchProduct()" type="button" class="btn btn-primary" style="margin-left: 1rem;">Search</button>
              <button (click)="clearSearch()" type="button" class="btn btn-secondary" [disabled]="!productSearch">Clear</button>
            </div>
            <div style="justify-content:right; margin-right: 2%;">
              <button *ngIf="!lastAdded" (click)="lastAddedChange(true)" style=" white-space: nowrap; background-color: rgb(231, 0, 231)" type="button" class="btn btn-light">Last Added 
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                </svg>
              </button>
              <button *ngIf="lastAdded" (click)="lastAddedChange(false)" style="white-space: nowrap; background-color:rgb(172, 0, 172); align-self: flex-end;" type="button" class="btn btn-light">Last Added
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill" viewBox="0 0 16 16">
                  <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
                </svg>
              </button>
            </div>
          </div>
    <table class="table table-striped">
      <thead>
          <tr>
              <th (click)="sortResult('Name')" style="cursor: pointer;">Name</th>
              <th (click)="sortResult('Category')" style="cursor: pointer;">Category</th>
              <th (click)="sortResult('Phe')" style="cursor: pointer;">Phe (mg/100g)</th>
              <th (click)="sortResult('Calories')" style="cursor: pointer;">Calories (kcal/100g)</th>
              <th style="text-align: center;">Options</th>
          </tr>
      </thead>
      <tbody>
        <tr *ngFor="let dataItem of ProductsList | paginate : {
          itemsPerPage:pageSize,
          currentPage: page,
          totalItems: count
        };
        let i = index"
          [class.active]="i==page">
              <td style="text-align: center;">{{dataItem?.Product.Name}}</td>
              <td style="text-align: center;">{{dataItem?.Product.Category}}</td>
              <td style="text-align: center;">{{dataItem?.Product.Phe/100}}</td>
              <td style="text-align: center;">{{dataItem?.Product.Calories/100}}</td>
              <td>
                <div style="display: flex; justify-content: center;">
                <button type="button" class="btn btn-info"
                  (click)="detailsClick(dataItem)"
                  data-toggle="modal" data-target="#exampleModal"
                  data-backdrop="static" data-keyboard="false"
                  >Details
                  </button>
                <button *ngIf="!dataItem.param" type="button" class="btn btn-success" 
                  (click)="addClick(dataItem)" data-toggle="modal" data-target="#exampleModal"
                  data-backdrop="static" data-keyboard="false"
                  >Add
                  </button>
                </div>
              </td>
          </tr>
      </tbody>
    </table>
    
    <div *ngIf="count==0" style="text-align: center; padding-left: 20px;"><h5><b>No Results</b></h5><br><br></div>
    
    <div class="d-flex justify-content-center">
      <pagination-controls 
      [responsive]="true"
        previousLabel="Prev" 
        nextLabel="Next" 
    (pageChange)="onPageChange($event)">
    </pagination-controls>
    </div>
    
    </div>
    </div>
    </div>  
    
    
    <div style="width: 60%; padding: 3%; padding-top: 0%; padding-right: 0%;">
    
      <div style="text-align: center; background-color: #212529; color: #38b0ff;" >
       <h1> Products in Dish </h1>
      </div>
      <table class="table table-striped" style="width: 100%">
        <thead>
            <tr>
                <th  style="text-align: center;">Name</th>
                <th  style="text-align: center;">Category</th>
                <th  style="text-align: center;">Phe (mg)</th>
                <th  style="text-align: center;">Calories (kcal)</th>
                <th  style="text-align: center;">Weight (g)</th>
                <th  style="text-align: center;">Options</th>
            </tr>
        </thead>
        <tbody>
          <tr *ngFor="let dataItem of DishProductsList | paginate : { id: 'pag2',
            itemsPerPage:pageSizepd,
            currentPage: pagepd,
            totalItems: countpd
          };
          let i = index"
            [class.active]="i==pagepd">
                <td style="text-align: center;">{{dataItem?.Product.Name}}</td>
                <td style="text-align: center;">{{dataItem?.Product.Category}}</td>
                <td style="text-align: center;">{{dataItem?.Product.Phe/100*dataItem.Weight/100/100}}</td>
                <td style="text-align: center;">{{dataItem?.Product.Calories/100*dataItem.Weight/100/100}}</td>
                <td style="text-align: center;">{{dataItem?.Weight/100}}</td>
                <td>
                  <div style="display: flex; justify-content: center;">
                  <button type="button" class="btn btn-info"
                  (click)="detailsDishProductClick(dataItem)"
                  data-toggle="modal" data-target="#exampleModal"
                  data-backdrop="static" data-keyboard="false"
                  >Details
                  </button>
                  <button type="button" class="btn btn-warning"
                  (click)="editClick(dataItem)"
                  data-toggle="modal" data-target="#exampleModal"
                  data-backdrop="static" data-keyboard="false"
                  >Edit
                  </button>
                  <button type="button" class="btn btn-danger"
                    (click)="delClick(dataItem)"
                    data-toggle="modal" data-target="#exampleModal"
                    data-backdrop="static" data-keyboard="false"
                    >Delete
                    </button>
                  </div>
                </td>
            </tr>
        </tbody>
      </table>
    
      <div class="d-flex justify-content-center">
        <pagination-controls 
        id="pag2"
        [responsive]="true"
          previousLabel="Prev" 
          nextLabel="Next" 
      (pageChange)="onPageChange2($event)">
      </pagination-controls>
      </div>
    
      <table class="table table-striped">
        <thead>
            <tr>
              <th style="text-align: center;"></th>
              <th style="text-align: center;">Phe (mg)</th>
              <th style="text-align: center;">Calories (kcal)</th>
              <th style="text-align: center;">Weight (g)</th>
              <th style="text-align: center;">Options</th>
            </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center;"><h4>Summary</h4></td>
            <td style="text-align: center;"><h4>{{DishProductsSummary?.Product.Phe/100}}</h4></td>
            <td style="text-align: center;"><h4>{{DishProductsSummary?.Product.Calories/100}}</h4></td>
            <td style="text-align: center;"><h4>{{DishProductsSummary?.Weight/100}}</h4></td>
            <td style="display: flex; justify-content: center; align-items: center;">
              <button type="button" class="btn btn-info"
            (click)="detailsSummaryClick()"
            data-toggle="modal" data-target="#exampleModal"
            data-backdrop="static" data-keyboard="false" [disabled]="DishProductsSummary?.Weight==0"
            >Details
            </button></td>
            </tr>
        </tbody>
    </table>
    <br>
    <div style="display: flex; justify-content: center;">
      <button type="button" class="btn btn-secondary" style="font-size:25px; padding-left:25px; padding-right:25px"
      (click)="clearDishClick()" [disabled]="DishProductsSummary?.Weight==0"
      data-toggle="modal" data-target="#exampleModal"
      data-backdrop="static" data-keyboard="false"
      >Clear Dish
      </button>
      <button type="button" class="btn btn-dark" style="font-size:25px; padding-left:25px; padding-right:25px"
      (click)="createDishClick()" [disabled]="DishProductsSummary?.Weight==0"
      data-toggle="modal" data-target="#exampleModal"
      data-backdrop="static" data-keyboard="false"
      >Create Dish
      </button>
      </div>

    </div>
    </div>
